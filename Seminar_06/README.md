# ДЗ к семинару 6

Это простое веб-приложение на PHP для управления пользователями, разработанное в рамках семинара. Приложение позволяет создавать, просматривать, редактировать и удалять пользователей из базы данных.

## Архитектура и Технологии

- **Язык**: PHP
- **База данных**: MySQL
- **Взаимодействие с БД**: PDO (с использованием подготовленных выражений для защиты от SQL-инъекций)
- **Веб-сервер**: Nginx + PHP-FPM
- **Окружение**: Docker (многоконтейнерная сборка)
- **Шаблонизатор**: Twig
- **Архитектурный паттерн**: Приложение построено с элементами слоеной архитектуры, разделяя логику на `Domain`, `Application` и `Infrastructure`.

## Реализованный функционал

### 1. Управление пользователями (CRUD)

- **Просмотр**: Страница `/user` отображает список всех пользователей из базы данных.
- **Создание**: Реализована форма для добавления нового пользователя (`/user/create`), которая сохраняет данные через `/user/save`.
- **Редактирование**: Для каждого пользователя в списке доступны кнопки для редактирования (`/user/edit`) и удаления.
- **Обновление**: Форма редактирования отправляет данные на `/user/update`, обновляя запись в базе данных.
- **Удаление**: Кнопка удаления (`/user/delete`) отправляет запрос на удаление пользователя с подтверждением действия.

### 2. Пользовательский интерфейс (UI)

- **Навигация**: Добавлено сквозное меню для перемещения между главной страницей и списком пользователей.
- **Интерактивность**: В списке пользователей у каждой записи есть кнопки для быстрого редактирования и удаления.
- **Обратная связь**: После каждого действия (создание, обновление, удаление) пользователь видит информативное сообщение о результате. Например, "Пользователь Иван Иванов был успешно удален".
- **Формы**: Созданы удобные формы для добавления и редактирования пользователей с предзаполнением данных при редактировании.

### 3. Обработка ошибок и валидация

- **Исключения**: Настроен централизованный обработчик исключений, который отображает ошибки в общем дизайне сайта.
- **Валидация данных**: Перед сохранением или обновлением данных проверяется их корректность. Например, поля имени и фамилии обязательны для заполнения.
- **Необязательные поля**: Реализована корректная обработка необязательных полей, таких как дата рождения. Если она не указана, приложение не выдает ошибку, а в списке отображается "не указан".
- **Устранены ошибки типов**: Исправлены ошибки `TypeError` при работе с полями, которые могут быть `NULL` в базе данных (имя, фамилия, дата рождения).

## Запуск

1.  **Настройте файл `hosts`**

    Чтобы сайт открывался по доменному имени `mysite.local`, добавьте следующую строку в ваш файл `hosts`:

    -   **Windows**: `C:\Windows\System32\drivers\etc\hosts`
    -   **macOS / Linux**: `/etc/hosts`

    ```
    127.0.0.1 mysite.local
    ```

2.  **Запустите проект**

    Используйте Docker Compose для сборки и запуска контейнеров:
    ```bash
    docker-compose up -d --build
    ```
    После завершения сборки приложение будет доступно по адресу [http://mysite.local](http://mysite.local).

3.  **Остановите проект**

    Для остановки контейнеров выполните команду:
    ```bash
    docker-compose down
    ```
